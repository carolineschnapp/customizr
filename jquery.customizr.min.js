/**
 * Cookie plugin
 *
 * Copyright (c) 2006 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */
 
jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+(m.path):"";var g=m.domain?"; domain="+(m.domain):"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};

/**
 * JSON library by Douglas Crockford.
 *
 * This code creates a global JSON object containing two methods: stringify and parse.
 *
 */

var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());

// make it safe to use console.log always
(function(a){function b(){}for(var c="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),d;!!(d=c.pop());){a[d]=a[d]||b;}})
(function(){try{console.log();return window.console;}catch(a){return (window.console={});}}());

/**
 * Module for product customization.
 *
 * Copyright (c) 2011-2012 Caroline Schnapp (11heavens.com)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */

String.prototype.capitalizeFirstLetter=function(){return this.charAt(0).toUpperCase()+this.slice(1)};String.prototype.removeCurrencyDescriptor=function(){return this.replace(/#\d+;/g,"").replace(/[^\d,.]/g,"")};Shopify.Customizr=(function(g){var t={selector:null,showLabelOnCartPage:true,noLabel:"No label",labelFormatOnCartPage:"%s: ",lineItemFormatInTemplatesPlainText:"%qx %t for %p each",attributeSeparator:" / ",checkboxOnValue:"yes",requiredText:"This field is required",requiredSelect:"Please select an option",requiredCheckbox:"This checkbox is required",useNativeValidation:null};var k={};var q=false;var u="checkout";var i=false;var b=false;var r={configuration:{expires:14,path:"/",domain:window.location.hostname},name:"shopify_product_customization",write:function(v){g.cookie(this.name,JSON.stringify(v),this.configuration)},read:function(){var v={};var w=g.cookie(this.name);if(w!==null){v=JSON.parse(w)}return v},destroy:function(){g.cookie(this.name,null,this.configuration)}};var e=function(v,x){if(x==="required"){var w=navigator.userAgent.toLowerCase();if(w.indexOf("chrome")!==-1){return true}if(w.indexOf("safari")!==-1){return false}}var y=document.createElement(v);if(x in y){return true}else{return false}};var p=function(z,y){var x=z.attr("data-label");if(x){return x}var A=z.attr("id");if(A){label=g.trim(g("label[for="+A+"]",y).filter(":first").text().replace(":",""));if(label){return label}}var w=z.attr("name")||"";var v=w.match(/attributes\[([\w-]+)\]/);if(v!==null){return v[1].replace(/(-|_)/g," ").capitalizeFirstLetter()}else{if(w){return w.replace(/(-|_)/g," ").capitalizeFirstLetter()}else{return t.noLabel}}};var d=function(w){if(t.useNativeValidation){w.attr("required","required")}else{if(!(w.parent().is(".error"))){var v=w.attr("data-error");if(!v){if(w.is(":checkbox")){v=t.requiredCheckbox}else{if(w.is("select")){v=t.requiredSelect}else{v=t.requiredText}}}w.wrap('<span class="error"></span>');w.after("<span>"+v+"</span>");w.blur(function(){var x=w.val();if(x){w.parent().find("span").remove();w.unwrap();g(this).unbind("blur")}})}}};var f=function(v){return(v.attr("required")||v.is(".required"))};var s=function(v){var x="";if(typeof v.length==="number"){for(var w=0;w<v.length;w++){x+=t.attributeSeparator;if(t.showLabelOnCartPage&&v[w].label!==t.noLabel){x+=t.labelFormatOnCartPage.replace("%s",v[w].label)}x+=v[w].value}}return x};var l=function(v,C,w,z){for(var y=0;y<k[v].length;y++){if(k[v][y].uniqueId===C){var x=k[v][y].quantity;k[v][y].quantity=w;var B=w-x;var A=parseInt(z.val(),10);z.val(A+B);if(w===0){k[v].splice(y,1);if(k[v].length===0){k[v]=undefined}}r.write(k);break}}};var a=function(w,C,v,B,x){for(var y=0;y<k[w].length;y++){if(k[w][y].uniqueId===C){var A=k[w][y].quantity*v;var z=Shopify.money_format;if(x){A=Currency.convert(A,Shopify.shop_currency,Currency.currentCurrency);z=Currency.money_format[Currency.currentCurrency]}B.html(Shopify.formatMoney(A,z));break}}};var m=function(v){if((typeof Currency==="object")&&(typeof Currency.convertAll==="function")){return Currency.currentCurrency&&(Currency.currentCurrency!==v)}else{return false}};var o=function(){b=true;g('form[action="/cart"]').append('<input type="hidden" name="'+u+'" value="'+u+'" />').attr("action","/cart").get(0).submit()};var n=function(){g('a[href="/checkout"]').attr("href","/cart")};var h=function(v){g.ajaxSetup({cache:false});g.getJSON("/cart.js",function(A){if(A.item_count===0){v={};r.write(v)}else{if(g.isEmptyObject(v)){console.info("[Customizr] We have items in the cart yet no Customizr cookie.")}else{for(var x in v){if(typeof v[x]!=="undefined"&&v[x].length){var w=false;for(var y=0;y<A.items.length;y++){if(!w&&(A.items[y].id==x)){w=true;var z=0;for(j=0;j<v[x].length;j++){z+=v[x][j].quantity}if(z>A.items[y].quantity){console.error("[Customizr] We should have %s items for the Line Item with ID %s but the Customizr cookie says we have %s.",A.items[y].quantity,A.items[y].id,z);v[x]=undefined;r.write(v)}break}}if(!w){console.error("[Customizr] We could not find Line Item with ID %s in the cart. We had some customization information stored for it in the Customizr cookie.",A.items[y].id);v[x]=undefined;r.write(v)}w=false}}}}})};var c=function(v){var w="";g.each(v,function(C,E){if(k[C]!==undefined&&k[C].length>0){var D="\n"+t.lineItemFormatInTemplatesPlainText;var B=E.title;var A=E.quantity;var z=E.price;var y=Shopify.formatMoney(z);var F=y.removeCurrencyDescriptor();w+="attributes["+encodeURIComponent(B)+"]=";g.each(k[C],function(G,I){if(I.quantity>0){var J=I.quantity;var H="<p>"+s(I.attributes)+"</p>";var H=B+" "+g(H).text();w+=encodeURIComponent(D.replace("%q",J).replace("%t",H).replace("%p",F));A=A-I.quantity}});if(A>0){w+=D.replace("%q",A).replace("%t",B).replace("%p",F)}w+="&"}else{w+="attributes["+encodeURIComponent(B)+"]=&"}});g('[name="note"], [name^="attributes"]').each(function(){w+=g(this).attr("name")+"="+encodeURIComponent(g(this).val())+"&"});var x={type:"POST",url:"/cart/update.js",data:w,dataType:"json",success:o};g.ajax(x)};return{attach:function(v){g.extend(t,v||{});if(t.useNativeValidation===null){t.useNativeValidation=e("input","required")}k=r.read();h(k);g(function(){n();if(t.useNativeValidation&&g('script[src*="ajax"]').not('[src*="googleapis"]').size()){t.useNativeValidation=false}g('form[action="/cart/add"]').each(function(){var y=g(this);var z=g(this)[0];var w=y.find("input:submit, input:image");var x=w.attr("onclick");w.removeAttr("onclick");if(typeof addToCart==="function"){w.unbind("click",addToCart)}w.click(function(A){var J=y.find('[name^="id"]').val();var F=parseInt(y.find('[name="quantity"]').val(),10)||1;var H=(new Date()).getTime();var E=true;if(J){var B=[];var C;if(t.selector===null){C=y.find("input:enabled,select:enabled,textarea:enabled").not("input:submit").not("button").not("input:image").not("input:file").not('[name^="id"]').not('[name="quantity"]').not(".single-option-selector").not('[name="analyticsdata"]').not('[name="return_to"]')}else{C=g(t.selector)}C.each(function(L){var M="";if(g(this).is(":checkbox")){if(g(this).is(":checked")){M=g(this).val();if(M==="on"||M===""){M=t.checkboxOnValue}}else{if(f(g(this))){E=false;d(g(this))}return}}else{if(g(this).is(":radio")){if(g(this).is(":checked")){M=g(this).val();if(M===""){return}}else{return}}else{M=g(this).val();if(M===""||M===undefined){if(f(g(this))){E=false;d(g(this))}return}}}var K=p(g(this),z);B.push({label:K,value:M})});if(E){if(B.length){k[J]=k[J]||[];var I=false;var D=JSON.stringify(B);for(var G=0;G<k[J].length;G++){if(JSON.stringify(k[J][G].attributes)===D){k[J][G].quantity+=F;I=true;console.info("Customizr: We already had this particular customization for item with variant ID %s in the cart. We are adding it again %s time(s). This is the customization: %s",J,F,D);break}}if(!I){k[J].push({uniqueId:H,quantity:F,attributes:B});console.info("Customizr: We did not have this particular customization in the cart before for item with variant ID %s. We are adding it %s time(s). This is the customization: %s",J,F,D)}r.write(k)}if(typeof x==="function"){x.call();return false}else{if(typeof addToCart==="function"){addToCart.call(w);return false}else{return true}}}else{g("span.error :input:eq(0)").trigger("focus");if(t.useNativeValidation){return true}else{return false}}}})})})},show:function(z,x,A,y){g.extend(t,y||{});var w={};if(typeof z.total_price==="number"){var v=z.items;g.each(v,function(B,D){var C=D.id.toString();w[C]={};w[C].title=D.title;w[C].price=D.price;w[C].linePrice=D.line_price;w[C].quantity=D.quantity})}else{w=z}Shopify.money_format=x||Shopify.money_format||"$ {{amount}}";Shopify.shop_currency=A||"USD";if(window.location.pathname==="/cart"){k=r.read();g(function(){g("input[name^=updates]").each(function(){var C=g(this).attr("id").replace("updates_","");g(this).attr("name","updates["+C+"]")});var B=m(Shopify.shop_currency);g.each(k,function(I,Y){var I=I;var S="#updates_"+I;var F=w[I].title;var Z=w[I].price;var E=w[I].linePrice;var T='[href^="/cart/change"], [onclick], [class*="remove"]';var N=g(S).parents("tr");var H=g(S).parents("li");if(N.add(H).size()===0){k[I]=undefined;r.write(k);console.error("Customizr: On the Cart page, we could not find a particular Line Item, so we have cleared any customization information we had held for it in the Customizr cookie.");return}var C=N.length?N:H;var Q=N.length?"tr":"li";var aa=C.find("input[name^=updates]");var X=parseInt(aa.val(),10);var P=X;var O=Shopify.money_format;if(B){E=Currency.convert(E,Shopify.shop_currency,Currency.currentCurrency);O=Currency.money_format[Currency.currentCurrency]}var V=Shopify.formatMoney(E,O).removeCurrencyDescriptor();for(var U=0;U<Y.length;U++){if((typeof Y[U]==="object")&&(typeof Y[U].quantity==="number")&&(Y[U].quantity>0)){var L=Y[U].uniqueId;var M=s(Y[U].attributes);var K=Y[U].quantity;var W=C.clone(false).insertAfter(C).hide();var D=W.find("input[name^=updates]");D.attr("id",L).removeAttr("name").val(K).bind("change",{variantId:I,uniqueId:L,originalQtyInput:aa},function(ad){ad.stopImmediatePropagation();var ab=ad.data.variantId,ae=ad.data.uniqueId,ac=ad.data.originalQtyInput;l(ab,ae,parseInt(g(this).val(),10),ac)});W.find(T).removeAttr("onclick").unbind("click").bind("click",{qtyInput:D,variantId:I,uniqueId:L,originalQtyInput:aa},function(ad){ad.stopImmediatePropagation();ad.preventDefault();var ab=ad.data.variantId,af=ad.data.uniqueId,ac=ad.data.originalQtyInput,ae=ad.data.qtyInput;l(ab,af,0,ac);ae.val(0);g('form[action="/cart"]').get(0).submit()});P-=K;W.find(":contains("+F+"):last").get(0).innerHTML+=M;var G=W.find(":contains("+V+"):last");a(I,L,Z,G,B);W.show()}}if(P>0){var J=aa.hide().clone(false).insertAfter(aa).val(P).removeAttr("name").attr("data-before",P).unbind("change").show().bind("change",{originalQtyInput:aa},function(ae){ae.stopImmediatePropagation();var ac=parseInt(g(this).attr("data-before"),10),ab=parseInt(g(this).val(),10),ad=ae.data.originalQtyInput;var ag=ab-ac;var af=parseInt(ad.val(),10);g(this).attr("data-before",ab);ad.val(af+ag)});C.find(T).removeAttr("onclick").unbind("click").bind("click",{noCustomInput:J,originalQtyInput:aa},function(af){af.stopImmediatePropagation();af.preventDefault();var ad=af.data.noCustomInput,ae=af.data.originalQtyInput;var ac=parseInt(ad.val(),10);var ab=0;var ah=ab-ac;var ag=parseInt(ae.val(),10);ae.val(ag+ah);ad.val(0);g('form[action="/cart"]').get(0).submit()});var G=C.find(":contains("+V+"):last");var R=P*Z;var O=Shopify.money_format;if(B){R=Currency.convert(R,Shopify.shop_currency,Currency.currentCurrency);O=Currency.money_format[Currency.currentCurrency]}G.html(Shopify.formatMoney(R,O))}else{C.hide()}});g('form[action="/cart"] li:has(:text):odd').addClass("even").removeClass("odd");g('form[action="/cart"] li:has(:text):even').addClass("odd").removeClass("even");g('form[action="/cart"] tr:has(:text):odd').addClass("even").removeClass("odd");g('form[action="/cart"] tr:has(:text):even').addClass("odd").removeClass("even");g('input[name="checkout"], input[name="goto_pp"], input[name="goto_gc"]').click(function(){q=true;u=g(this).attr("name")});g('form[action="/cart"]').submit(function(C){if(i){return false}if(q&&!b){i=true;C.preventDefault();c(w)}else{return true}})})}},getConfig:function(){return t},clearAttributes:function(){r.destroy();k={}},inspectAttributes:function(z,x,v){var y=typeof v==="string"?v:"  ";var w=JSON.stringify(r.read(),null,y);var B=document.getElementById(z||"attributes-wrapper");if(typeof B==="object"){B.innerHTML=w;B.style.display="block"}var A=document.getElementById(x||"hide-attributes");if(typeof A==="object"){A.style.display="inline"}return w}}})(jQuery);